# 학생명부: 생년월일 입력 방식 변경(헤더 dropdown + 서버 저장)

- 날짜/시간: 2026-01-24 19:57:32
- 작업 폴더: `/Users/dev/onlyT_test1`

## 사용자 프롬프트

학생 관리 테이블에서 생년월일 입력 방식을 수정한다.

요구사항:

1. 생년월일 컬럼 옆에 있는 개별 date picker(달력 버튼)를 모두 제거한다.
2. 생년월일 컬럼 헤더에 주민등록번호 컬럼과 동일한 방식의 select dropdown을 추가한다.
3. dropdown에는 엑셀에서 업로드된 모든 컬럼명을 자동으로 표시한다.
4. 관리자가 생년월일 컬럼에 해당하는 엑셀 컬럼명을 선택하면,
   해당 컬럼 데이터를 모든 학생 row에 자동 반영하여 표시한다.
5. 선택 변경 시 즉시 상태 업데이트되고 테이블이 반응형으로 재렌더링된다.
6. 선택된 생년월일 컬럼 값은 YYYY-MM-DD 형식으로 변환하여 표시한다.
7. 선택된 컬럼 정보는 서버에 저장하여 다음 접속 시 유지되도록 한다.
8. 주민등록번호 컬럼 select 구조와 동일한 컴포넌트 구조 및 UX를 재사용한다.
9. 생년월일 컬럼은 텍스트 표시만 하고 개별 수정은 비활성화한다.

## AI 답변

- 프론트
  - 생년월일 컬럼의 **개별 `type="date"` 입력(달력 버튼)**을 제거하고 텍스트 표시로 변경.
  - 헤더에 **select dropdown**을 추가하고, 옵션은 서버가 제공하는 `excelHeaders`(마지막 업로드 엑셀 컬럼명 목록)로 자동 구성.
  - 선택 변경 시 즉시 로컬 상태 업데이트 후 `PATCH /student-records/settings` 호출 → 서버가 일괄 반영한 최신 학생 목록을 받아 테이블을 즉시 재렌더.

- 백엔드
  - 마지막 업로드 엑셀의 `headers/rawRows`를 DB에 캐시(`student_records_import_cache`).
  - 선택된 생년월일 원본 컬럼명을 DB에 저장(`student_records_settings`).
  - `PATCH /student-records/settings` 시 선택된 컬럼 데이터를 YYYY-MM-DD로 정규화하여 `student_records.birthDate`를 **번호(number) 기준 일괄 upsert**.
  - `GET /student-records/settings`로 저장된 선택값과 엑셀 헤더 목록을 제공.
